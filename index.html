<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Premium - Educational Edition</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.9/index.global.min.js"></script>
    <style>
        /* Base Styles */
        :root {
            --primary-color: #4361ee;
            --primary-dark: #3a0ca3;
            --secondary-color: #1dd1a1;
            --secondary-dark: #10ac84;
            --accent-color: #9b59b6;
            --danger-color: #ff6b6b;
            --warning-color: #ff9a3d;
            --text-color: #333;
            --text-light: #555;
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --border-color: #e0e0e0;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --nav-bg: rgba(25, 40, 80, 0.95);
        }

        /* Dark Theme */
        .dark-theme {
            --primary-color: #4895ef;
            --primary-dark: #3f37c9;
            --secondary-color: #4cc9f0;
            --secondary-dark: #4361ee;
            --accent-color: #b5179e;
            --danger-color: #f72585;
            --warning-color: #f8961e;
            --text-color: #f8f9fa;
            --text-light: #adb5bd;
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --border-color: #333;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --nav-bg: #0d1b2a;
        }

        /* Light Theme */
        .light-theme {
            --primary-color: #4361ee;
            --primary-dark: #3a0ca3;
            --secondary-color: #1dd1a1;
            --secondary-dark: #10ac84;
            --accent-color: #9b59b6;
            --danger-color: #ff6b6b;
            --warning-color: #ff9a3d;
            --text-color: #333;
            --text-light: #555;
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --border-color: #e0e0e0;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --nav-bg: rgba(25, 40, 80, 0.95);
        }

        /* Educational Theme */
        .edu-theme {
            --primary-color: #4895ef;
            --primary-dark: #3f37c9;
            --secondary-color: #4cc9f0;
            --secondary-dark: #4361ee;
            --accent-color: #b5179e;
            --danger-color: #f72585;
            --warning-color: #f8961e;
            --text-color: #212529;
            --text-light: #495057;
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --border-color: #dee2e6;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --nav-bg: #184e77;
        }

        /* Nature Theme */
        .nature-theme {
            --primary-color: #2a9d8f;
            --primary-dark: #264653;
            --secondary-color: #e9c46a;
            --secondary-dark: #f4a261;
            --accent-color: #e76f51;
            --danger-color: #e63946;
            --warning-color: #ffbe0b;
            --text-color: #1d3557;
            --text-light: #457b9d;
            --bg-color: #f1faee;
            --card-bg: #ffffff;
            --border-color: #a8dadc;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --nav-bg: #1b4332;
        }

        body {
            background-color: var(--bg-color);
            background-image:
                linear-gradient(var(--border-color) 1px, transparent 1px),
                linear-gradient(90deg, var(--border-color) 1px, transparent 1px);
            background-size: 30px 30px;
            background-position: center center;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            position: relative;
            color: var(--text-color);
            min-height: 100vh;
            margin: 0;
            padding: 0;
            transition: background-color 0.3s, color 0.3s;
        }

        /* Chatbot Styles */
        .chatbot-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
        }

        .chatbot-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 5px 15px var(--shadow-color);
            transition: all 0.3s ease;
        }

        .chatbot-icon:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .chatbot-icon i {
            font-size: 28px;
            color: white;
        }

        .chatbot-modal {
            width: 350px;
            height: 450px;
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 10px 30px var(--shadow-color);
            display: none;
            flex-direction: column;
            overflow: hidden;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.4s ease;
        }

        .chatbot-modal.active {
            display: flex;
            transform: translateY(0);
            opacity: 1;
        }

        .chatbot-header {
            background: linear-gradient(to right, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-header h3 {
            margin: 0;
            font-weight: 600;
        }

        .close-chatbot {
            background: transparent;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .close-chatbot:hover {
            transform: rotate(90deg);
        }

        .chatbot-body {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: var(--bg-color);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .chatbot-message {
            max-width: 80%;
            padding: 12px 18px;
            border-radius: 18px;
            position: relative;
            animation: fadeIn 0.3s ease;
        }

        .bot-message {
            align-self: flex-start;
            background: var(--card-bg);
            color: var(--text-color);
            border-bottom-left-radius: 5px;
            border: 1px solid var(--border-color);
        }

        .user-message {
            align-self: flex-end;
            background: var(--primary-color);
            color: white;
            border-bottom-right-radius: 5px;
        }

        .chatbot-input {
            display: flex;
            padding: 15px;
            background: var(--card-bg);
            border-top: 1px solid var(--border-color);
        }

        .chatbot-input input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 30px;
            font-size: 16px;
            outline: none;
            background: var(--bg-color);
            color: var(--text-color);
        }

        .chatbot-input button {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: none;
            background: var(--primary-color);
            color: white;
            margin-left: 10px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .chatbot-input button:hover {
            background: var(--primary-dark);
        }

        /* Main Container */
        .container {
            display: flex;
            min-height: 100vh;
            max-width: 1600px;
            margin: 0 auto;
            background: var(--card-bg);
            box-shadow: 0 0 30px var(--shadow-color);
            transition: background-color 0.3s;
        }

        /* Navbar */
        .navbar {
            width: 80px;
            background: var(--nav-bg);
            color: white;
            transition: width 0.3s ease;
            overflow: hidden;
            height: 100vh;
            position: fixed;
            z-index: 100;
            border-right: 1px solid rgba(100, 150, 255, 0.2);
        }

        .navbar.expanded {
            width: 220px;
        }

        .nav-header {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-profile {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            font-size: 18px;
            box-shadow: 0 0 10px rgba(100, 150, 255, 0.5);
        }

        .nav-icon {
            font-size: 1.8rem;
            cursor: pointer;
            transition: transform 0.3s;
            color: white;
        }

        .nav-icon:hover {
            transform: scale(1.1);
            color: var(--secondary-color);
        }

        .nav-links {
            list-style: none;
            padding: 20px 0;
            margin: 0;
        }

        .nav-item {
            padding: 15px 25px;
            transition: background-color 0.3s;
        }

        .nav-item:hover {
            background-color: rgba(52, 152, 219, 0.2);
        }

        .nav-item.active {
            background: linear-gradient(90deg, rgba(52, 152, 219, 0.7), transparent);
            border-left: 4px solid var(--primary-color);
        }

        .nav-item a {
            color: #e0e0ff;
            text-decoration: none;
            display: flex;
            align-items: center;
            font-size: 1.1rem;
        }

        .nav-item i {
            font-size: 1.5rem;
            margin-right: 15px;
            width: 30px;
            text-align: center;
            transition: transform 0.3s;
        }

        .nav-item:hover i {
            transform: scale(1.2);
        }

        .nav-text {
            display: none;
            white-space: nowrap;
            font-weight: 500;
        }

        .navbar.expanded .nav-text {
            display: inline;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 80px;
            padding: 30px;
            transition: margin-left 0.3s ease;
        }

        .navbar.expanded ~ .main-content {
            margin-left: 220px;
        }

        .page {
            display: none;
            animation: fadeIn 0.5s ease;
            min-height: calc(100vh - 60px);
        }

        .page.active-page {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            margin-bottom: 25px;
            color: var(--text-color);
            font-size: 2.8rem;
            text-align: center;
            position: relative;
            padding-bottom: 15px;
        }

        h1::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
            border-radius: 2px;
        }

        h2 {
            margin: 20px 0 15px;
            color: var(--text-color);
            font-size: 1.8rem;
        }

        p {
            color: var(--text-light);
            line-height: 1.6;
            margin-bottom: 20px;
        }

        /* Login Page */
        .login-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .login-box {
            background: var(--card-bg);
            padding: 40px;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .login-box h2 {
            margin-bottom: 25px;
            color: var(--text-color);
            font-size: 2rem;
        }

        .login-box input {
            width: 100%;
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-color);
            color: var(--text-color);
            font-size: 1rem;
        }

        .login-box button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(67, 97, 238, 0.4);
        }

        .login-box button:hover {
            background: linear-gradient(90deg, var(--primary-dark), var(--primary-color));
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(67, 97, 238, 0.6);
        }

        .user-select {
            margin-top: 20px;
            text-align: left;
        }

        .user-select label {
            color: var(--text-light);
            margin-bottom: 10px;
            display: block;
        }

        .user-select select {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-color);
            color: var(--text-color);
            font-size: 1rem;
        }

        /* Streak Display */
        .streak-display {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            padding: 15px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 50;
            box-shadow: 0 4px 15px var(--shadow-color);
            border: 1px solid var(--border-color);
        }

        .streak-count {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--danger-color);
        }

        .streak-label {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .streak-fire {
            color: var(--danger-color);
            font-size: 1.8rem;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        /* Home Page */
        #home {
            text-align: center;
            padding-top: 30px;
        }

        .features {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
            margin-top: 40px;
            justify-content: center;
        }

        .feature-card {
            flex: 1;
            min-width: 280px;
            max-width: 350px;
            background: var(--card-bg);
            padding: 30px 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px var(--shadow-color);
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
        }

        .feature-card i {
            font-size: 3.5rem;
            color: var(--primary-color);
            margin-bottom: 20px;
            background: rgba(67, 97, 238, 0.1);
            width: 80px;
            height: 80px;
            line-height: 80px;
            border-radius: 50%;
            text-align: center;
        }

        .feature-card h3 {
            margin-bottom: 15px;
            color: var(--text-color);
            font-size: 1.6rem;
        }

        .feature-card p {
            font-size: 1.1rem;
        }

        /* Timer Page */
        .timer-container {
            max-width: 600px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 8px 25px var(--shadow-color);
            border: 1px solid var(--border-color);
        }

        .current-task {
            background: rgba(67, 97, 238, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 25px;
            font-size: 1.2rem;
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        .timer-display-container {
            position: relative;
            width: 250px;
            height: 250px;
            margin: 30px auto;
        }

        .timer-progress {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(var(--primary-color) 0%, var(--bg-color) 0%);
            mask: radial-gradient(white 55%, transparent 56%);
            -webkit-mask: radial-gradient(white 55%, transparent 56%);
            transition: background 0.5s linear;
        }

        .timer-display {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3.5rem;
            font-family: 'Courier New', monospace;
            color: var(--primary-color);
            font-weight: 600;
        }

        .timer-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        .timer-controls button {
            padding: 12px 30px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
            color: white;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(67, 97, 238, 0.4);
        }

        .timer-controls button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(67, 97, 238, 0.6);
        }

        .timer-controls button:active {
            transform: translateY(1px);
        }

        #pause-timer {
            background: linear-gradient(90deg, var(--warning-color), #ff7a00);
        }

        #reset-timer {
            background: linear-gradient(90deg, var(--danger-color), #ff3d3d);
        }

        /* Pause Controls */
        .pause-controls {
            display: none;
            margin-top: 25px;
            text-align: center;
        }

        .pause-controls button {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            margin: 0 10px;
            color: white;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .pause-controls button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        #take-notes-btn {
            background: linear-gradient(90deg, var(--accent-color), #8e44ad);
        }

        #switch-task-btn {
            background: linear-gradient(90deg, var(--warning-color), #ff7a00);
        }

        .timer-settings {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 25px;
            background: rgba(67, 97, 238, 0.05);
            padding: 20px;
            border-radius: 15px;
        }

        .timer-settings label {
            text-align: left;
            font-weight: 500;
            color: var(--primary-color);
            font-size: 1.1rem;
        }

        .timer-settings input {
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            width: 100%;
            background: var(--bg-color);
            color: var(--text-color);
            font-size: 1.1rem;
            transition: all 0.3s;
        }

        .timer-settings input:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        /* Time Lock Feature */
        .time-lock-container {
            margin-top: 20px;
            background: rgba(67, 97, 238, 0.05);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .time-lock-title {
            margin-bottom: 15px;
            color: var(--primary-color);
            font-size: 1.2rem;
            font-weight: 500;
        }

        .time-lock-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .time-lock-controls button {
            padding: 10px 20px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            font-weight: 600;
            color: white;
        }

        #enable-time-lock {
            background: linear-gradient(90deg, var(--danger-color), #ff3d3d);
        }

        #disable-time-lock {
            background: linear-gradient(90deg, var(--secondary-color), var(--secondary-dark));
            display: none;
        }

        .time-lock-status {
            margin-top: 15px;
            font-size: 0.9rem;
            color: var(--text-light);
        }

        /* Progress Page Styles */
        .progress-container {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
            margin-top: 20px;
        }

        .progress-chart-container {
            flex: 1;
            min-width: 300px;
            background: var(--card-bg);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 8px 25px var(--shadow-color);
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .progress-chart-container h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
            text-align: center;
            font-weight: 500;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
        }

        /* Clock Visualization */
        .clock-visualization {
            width: 200px;
            height: 200px;
            margin: 20px auto;
            position: relative;
        }

        .clock-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: rgba(67, 97, 238, 0.05);
            position: relative;
            overflow: hidden;
            border: 5px solid rgba(67, 97, 238, 0.1);
        }

        .clock-progress {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            clip: rect(0, 100px, 200px, 0);
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            transform: rotate(0deg);
            transition: transform 0.5s linear;
        }

        .clock-progress-fill {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            clip: rect(0, 100px, 200px, 0);
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            transform: rotate(180deg);
            transition: transform 0.5s linear;
        }

        .clock-inner {
            position: absolute;
            width: 80%;
            height: 80%;
            background: var(--card-bg);
            border-radius: 50%;
            top: 10%;
            left: 10%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-color);
            border: 3px solid rgba(67, 97, 238, 0.1);
        }

        .progress-stats {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
            min-width: 280px;
        }

        .stat-card {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px var(--shadow-color);
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .stat-card h3 {
            color: var(--text-light);
            font-size: 1.2rem;
            margin-bottom: 15px;
        }

        .stat-value {
            font-size: 2.2rem;
            color: var(--primary-color);
            font-weight: bold;
        }

        .subject-list {
            margin-top: 20px;
            width: 100%;
        }

        .subject-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid rgba(67, 97, 238, 0.1);
        }

        .subject-name {
            display: flex;
            align-items: center;
        }

        .subject-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 10px;
            display: inline-block;
        }

        /* Tasks Page Styles */
        .task-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .task-form {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px var(--shadow-color);
            border: 1px solid var(--border-color);
        }

        .task-form input {
            flex: 2;
            min-width: 200px;
            padding: 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-color);
            color: var(--text-color);
            font-size: 1.1rem;
            transition: all 0.3s;
        }

        .task-form input:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        .task-form button {
            padding: 15px 30px;
            background: linear-gradient(90deg, var(--secondary-color), var(--secondary-dark));
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            font-size: 1.1rem;
            box-shadow: 0 4px 15px rgba(29, 209, 161, 0.3);
        }

        .task-form button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(29, 209, 161, 0.4);
        }

        .task-form select {
            padding: 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-color);
            color: var(--text-color);
            font-size: 1.1rem;
            min-width: 200px;
            transition: all 0.3s;
        }

        .task-form select:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        .task-list {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px var(--shadow-color);
            border: 1px solid var(--border-color);
        }

        .task-list h3 {
            margin-bottom: 20px;
            color: var(--primary-color);
            font-size: 1.5rem;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(67, 97, 238, 0.1);
        }

        .task-list ul {
            list-style: none;
            margin-bottom: 30px;
        }

        .task-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid rgba(67, 97, 238, 0.1);
            background: var(--bg-color);
            margin-bottom: 10px;
            border-radius: 10px;
            transition: all 0.3s;
        }

        .task-item:hover {
            background: rgba(67, 97, 238, 0.05);
            transform: translateX(5px);
        }

        .task-item:last-child {
            border-bottom: none;
        }

        .task-info {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }

        .task-checkbox {
            cursor: pointer;
            width: 20px;
            height: 20px;
        }

        .task-text {
            flex: 1;
            font-size: 1.2rem;
        }

        .task-text.completed {
            text-decoration: line-through;
            color: #95a5a6;
        }

        .task-priority {
            font-size: 0.9rem;
            padding: 5px 12px;
            border-radius: 15px;
            color: white;
            font-weight: 600;
        }

        .priority-low {
            background: linear-gradient(90deg, var(--secondary-color), var(--secondary-dark));
        }

        .priority-medium {
            background: linear-gradient(90deg, var(--warning-color), #ff7a00);
        }

        .priority-high {
            background: linear-gradient(90deg, var(--danger-color), #ff3d3d);
        }

        .task-actions {
            display: flex;
            gap: 10px;
        }

        .task-actions button {
            padding: 8px 15px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            font-weight: 600;
        }

        .task-actions button:hover {
            transform: translateY(-2px);
        }

        .start-task {
            background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
            color: white;
        }

        .edit-task {
            background: linear-gradient(90deg, var(--warning-color), #ff7a00);
            color: white;
        }

        .delete-task {
            background: linear-gradient(90deg, var(--danger-color), #ff3d3d);
            color: white;
        }

        /* Checklist Styles */
        .subtask-container {
            margin-top: 10px;
            padding-left: 30px;
            border-left: 2px solid rgba(67, 97, 238, 0.1);
        }

        .subtask-form {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .subtask-input {
            flex: 1;
            padding: 8px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background: var(--bg-color);
            color: var(--text-color);
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .subtask-input:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        .add-subtask {
            padding: 8px 15px;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            font-weight: 600;
        }

        .add-subtask:hover {
            transform: translateY(-2px);
        }

        .subtask-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 8px 0;
            padding: 8px;
            border-radius: 6px;
            background: rgba(67, 97, 238, 0.03);
        }

        .subtask-checkbox {
            cursor: pointer;
        }

        .subtask-text {
            flex: 1;
            font-size: 0.9rem;
        }

        .subtask-text.completed {
            text-decoration: line-through;
            color: #95a5a6;
        }

        .delete-subtask {
            color: var(--danger-color);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .delete-subtask:hover {
            transform: scale(1.2);
        }

        /* Calendar Page Styles */
        #calendar {
            max-width: 1000px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px var(--shadow-color);
            border: 1px solid var(--border-color);
        }

        .fc {
            color: var(--text-color);
        }

        .fc-header-toolbar {
            margin-bottom: 1em;
        }

        .fc-button {
            background: rgba(67, 97, 238, 0.7) !important;
            border: none !important;
            color: white !important;
            text-shadow: none !important;
            transition: all 0.3s;
        }

        .fc-button:hover {
            background: rgba(67, 97, 238, 1) !important;
            transform: translateY(-2px);
        }

        .fc-button-primary:not(:disabled).fc-button-active {
            background: rgba(67, 97, 238, 0.9) !important;
        }

        .fc-daygrid-day-number, .fc-col-header-cell-cushion {
            color: var(--primary-color);
        }

        .fc-daygrid-day-frame {
            background: rgba(67, 97, 238, 0.05);
        }

        .fc-day-today {
            background: rgba(67, 97, 238, 0.1) !important;
        }

        .fc-event {
            background: rgba(29, 209, 161, 0.7);
            border: none;
            cursor: pointer;
            transition: all 0.3s;
        }

        .fc-event:hover {
            background: rgba(29, 209, 161, 1);
            transform: translateY(-2px);
        }

        .fc-event-title {
            font-weight: 500;
        }

        /* Notes Page Styles */
        .notes-container {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
        }

        .notes-form {
            flex: 1;
            min-width: 300px;
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px var(--shadow-color);
            border: 1px solid var(--border-color);
        }

        .notes-form input,
        .notes-form textarea {
            width: 100%;
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-color);
            color: var(--text-color);
            font-size: 1.1rem;
            transition: all 0.3s;
        }

        .notes-form input:focus,
        .notes-form textarea:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        .notes-form textarea {
            min-height: 200px;
            resize: vertical;
        }

        .notes-form button {
            padding: 15px 30px;
            background: linear-gradient(90deg, var(--accent-color), #8e44ad);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            font-size: 1.1rem;
            box-shadow: 0 4px 15px rgba(155, 89, 182, 0.3);
            width: 100%;
        }

        .notes-form button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(155, 89, 182, 0.4);
        }

        .notes-list {
            flex: 1;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .note-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 25px var(--shadow-color);
            border: 1px solid var(--border-color);
            transition: all 0.3s;
        }

        .note-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
        }

        .note-card h3 {
            margin-bottom: 15px;
            color: var(--primary-color);
            font-size: 1.5rem;
        }

        .note-card p {
            color: var(--text-light);
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .note-actions {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }

        .note-actions button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            font-weight: 600;
        }

        .note-actions button:hover {
            transform: translateY(-2px);
        }

        .edit-note {
            background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
            color: white;
        }

        .delete-note {
            background: linear-gradient(90deg, var(--danger-color), #ff3d3d);
            color: white;
        }

        /* History Page Styles */
        .history-container {
            max-width: 900px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px var(--shadow-color);
            border: 1px solid var(--border-color);
        }

        .history-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid rgba(67, 97, 238, 0.1);
            background: var(--bg-color);
            border-radius: 10px;
            transition: all 0.3s;
        }

        .history-item:hover {
            background: rgba(67, 97, 238, 0.05);
        }

        .history-info {
            flex: 1;
        }

        .history-task {
            font-size: 1.2rem;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .history-duration {
            color: var(--text-light);
            font-size: 1rem;
        }

        .history-date {
            color: var(--text-light);
            font-size: 1rem;
            white-space: nowrap;
            margin-left: 20px;
        }

        /* Friends Page Styles */
        .friends-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .manage-friends {
            padding: 15px 30px;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            font-size: 1.1rem;
            box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3);
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .manage-friends:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(67, 97, 238, 0.4);
        }

        .friend-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }

        .friend-card {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px var(--shadow-color);
            border: 1px solid var(--border-color);
            transition: all 0.3s;
            text-align: center;
        }

        .friend-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
        }

        .friend-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 24px;
            margin: 0 auto 15px;
            color: white;
            box-shadow: 0 0 15px rgba(100, 150, 255, 0.5);
        }

        .friend-card h3 {
            margin-bottom: 15px;
            color: var(--primary-color);
            font-size: 1.5rem;
        }

        .friend-tasks {
            margin-top: 20px;
        }

        .friend-tasks h4 {
            color: var(--text-light);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .friend-task-item {
            padding: 10px;
            margin-bottom: 8px;
            background: var(--bg-color);
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .friend-task-priority {
            font-size: 0.8rem;
            padding: 3px 10px;
            border-radius: 15px;
            color: white;
            font-weight: 600;
        }

        /* Feedback Page Styles */
        .feedback-container {
            max-width: 600px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 25px var(--shadow-color);
            border: 1px solid var(--border-color);
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            color: var(--text-light);
            font-size: 1.1rem;
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-color);
            color: var(--text-color);
            font-size: 1.1rem;
            transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        .form-group textarea {
            min-height: 200px;
            resize: vertical;
        }

        .rating {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            justify-content: center;
        }

        .star {
            font-size: 2rem;
            color: #ffd700;
            cursor: pointer;
            transition: all 0.3s;
            opacity: 0.5;
        }

        .star.active,
        .star:hover {
            opacity: 1;
            transform: scale(1.2);
        }

        .feedback-container button[type="submit"] {
            padding: 15px 30px;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            font-size: 1.1rem;
            box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3);
            width: 100%;
        }

        .feedback-container button[type="submit"]:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(67, 97, 238, 0.4);
        }

        .thank-you-message {
            display: none;
            text-align: center;
            padding: 30px;
            background: var(--card-bg);
            border-radius: 15px;
        }

        .thank-you-message h2 {
            color: var(--secondary-color);
            margin-bottom: 15px;
            font-size: 2rem;
        }

        .thank-you-message p {
            font-size: 1.2rem;
            color: var(--text-light);
        }

        /* Educational elements */
        .learning-concepts {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            border: 1px solid var(--border-color);
            border-left: 5px solid var(--primary-color);
        }

        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .concept-card {
            background: rgba(67, 97, 238, 0.05);
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
        }

        .concept-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .concept-card h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .concept-card p {
            color: var(--text-light);
            font-size: 1rem;
        }

        .edu-insight {
            background: rgba(67, 97, 238, 0.05);
            border-left: 4px solid var(--primary-color);
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }

        .edu-insight h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        /* Theme Selector */
        .theme-selector {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
            background: var(--card-bg);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 5px 15px var(--shadow-color);
            border: 1px solid var(--border-color);
        }

        .theme-selector h4 {
            margin-bottom: 10px;
            color: var(--text-color);
            font-size: 1rem;
        }

        .theme-options {
            display: flex;
            gap: 10px;
        }

        .theme-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid var(--border-color);
            transition: transform 0.3s;
        }

        .theme-option:hover {
            transform: scale(1.1);
        }

        .theme-option.light {
            background: linear-gradient(135deg, #4361ee, #3a0ca3);
        }

        .theme-option.dark {
            background: linear-gradient(135deg, #4895ef, #3f37c9);
        }

        .theme-option.edu {
            background: linear-gradient(135deg, #4895ef, #3f37c9);
        }

        .theme-option.nature {
            background: linear-gradient(135deg, #2a9d8f, #264653);
        }

        /* Friend Management Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            display: none;
        }
.time-presets {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin: 20px 0;
}

.time-preset {
    padding: 8px 15px;
    background: rgba(67, 97, 238, 0.1);
    border-radius: 20px;
    cursor: pointer;
    transition: all 0.3s;
    font-weight: 500;
    color: var(--primary-color);
    border: 1px solid var(--border-color);
}

.time-preset:hover {
    background: rgba(67, 97, 238, 0.2);
    transform: translateY(-2px);
}

.time-preset.active {
    background: var(--primary-color);
    color: white;
    box-shadow: 0 4px 10px rgba(67, 97, 238, 0.3);
}
        .friend-modal {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .friend-modal h3 {
            margin-top: 0;
            color: var(--primary-color);
        }

        .friend-search {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .friend-search input {
            flex: 1;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-color);
            color: var(--text-color);
        }

        .friend-search button {
            padding: 12px 20px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        .friend-results {
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 10px;
        }

        .friend-result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .friend-result-item:last-child {
            border-bottom: none;
        }

        .friend-result-name {
            font-weight: 600;
        }

        .friend-result-actions button {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .add-friend-btn {
            background: var(--secondary-color);
            color: white;
        }

        .remove-friend-btn {
            background: var(--danger-color);
            color: white;
        }

        .current-friends {
            margin-top: 20px;
        }

        .current-friends h4 {
            margin-bottom: 10px;
            color: var(--text-light);
        }

        .friend-list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: var(--bg-color);
            margin-bottom: 5px;
            border-radius: 5px;
        }

        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        .modal-actions button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .cancel-btn {
            background: var(--bg-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        .save-btn {
            background: var(--primary-color);
            color: white;
        }

        /* Calendar Event Modal */
        .event-modal {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .event-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .event-form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .event-form-group label {
            color: var(--text-light);
            font-weight: 500;
        }

        .event-form-group input,
        .event-form-group textarea,
        .event-form-group select {
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            background: var(--bg-color);
            color: var(--text-color);
        }

        .event-form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .event-color-picker {
            display: flex;
            gap: 10px;
            margin-top: 5px;
        }

        .event-color-option {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid var(--border-color);
        }

        .event-color-option.selected {
            border-color: var(--primary-color);
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .navbar {
                width: 70px;
            }
           
            .navbar.expanded {
                width: 200px;
            }
           
            .main-content {
                margin-left: 70px;
                padding: 20px;
            }
           
            .navbar.expanded ~ .main-content {
                margin-left: 200px;
            }
        }

        @media (max-width: 768px) {
            .navbar {
                width: 100%;
                height: auto;
                position: relative;
            }
           
            .navbar.expanded {
                width: 100%;
            }
           
            .container {
                flex-direction: column;
            }
           
            .main-content {
                margin-left: 0;
                margin-top: 70px;
            }
           
            .navbar.expanded ~ .main-content {
                margin-left: 0;
            }
            
           
            .nav-links {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
            }
           
            .nav-item {
                padding: 12px 15px;
            }
           
            .navbar.expanded .nav-item {
                justify-content: flex-start;
            }
           
            .feature-card {
                min-width: 100%;
            }

            .theme-selector {
                bottom: 100px;
                left: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Chatbot Interface -->
    <div class="chatbot-container" id="chatbot-container">
        <div class="chatbot-icon" id="chatbot-icon">
            <i class="fas fa-robot"></i>
        </div>
        <div class="chatbot-modal" id="chatbot-modal">
            <div class="chatbot-header">
                <h3>Study Assistant</h3>
                <button class="close-chatbot" id="close-chatbot">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="chatbot-body" id="chatbot-body">
                <div class="chatbot-message bot-message">
                    <p>Hello! I'm your Study Assistant. Ask me anything about learning techniques, productivity tips, or how to use this planner!</p>
                </div>
            </div>
            <div class="chatbot-input">
                <input type="text" id="chatbot-input" placeholder="Ask anything...">
                <button id="send-chatbot"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
    </div>

    <!-- Theme Selector -->
    <div class="theme-selector">
        <h4>Theme</h4>
        <div class="theme-options">
            <div class="theme-option light" data-theme="light-theme" title="Light Theme"></div>
            <div class="theme-option dark" data-theme="dark-theme" title="Dark Theme"></div>
            
        </div>
    </div>

    <!-- Login Page -->
    <div class="login-container">
        <div class="login-box">
            <h2>Welcome to Study Planner</h2>
            <input type="text" id="username" placeholder="Enter your name">
            <button id="login-btn">Continue</button>
            <div class="user-select">
                <label>Or select existing user:</label>
                <select id="existing-users">
                    <option value="">Select a user</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Streak Display -->
    <div class="streak-display" id="streak-display" style="display: none;">
        <i class="fas fa-fire streak-fire"></i>
        <div>
            <div class="streak-count" id="streak-count">0</div>
            <div class="streak-label">Day Streak</div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <nav class="navbar">
            <div class="nav-header">
                <i class="fas fa-bars nav-icon" id="nav-toggle"></i>
                <div class="user-profile" id="user-profile">U</div>
            </div>
            <ul class="nav-links">
                <li class="nav-item active">
                    <a href="#home">
                        <i class="fas fa-home"></i>
                        <span class="nav-text">Home</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#timer">
                        <i class="fas fa-clock"></i>
                        <span class="nav-text">Timer</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#calendar-page">
                        <i class="fas fa-calendar-alt"></i>
                        <span class="nav-text">Calendar</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#progress">
                        <i class="fas fa-chart-pie"></i>
                        <span class="nav-text">Progress</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#tasks">
                        <i class="fas fa-tasks"></i>
                        <span class="nav-text">Tasks</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#history">
                        <i class="fas fa-history"></i>
                        <span class="nav-text">History</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#friends">
                        <i class="fas fa-users"></i>
                        <span class="nav-text">Friends</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#notes">
                        <i class="fas fa-sticky-note"></i>
                        <span class="nav-text">Notes</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#feedback">
                        <i class="fas fa-comment-alt"></i>
                        <span class="nav-text">Feedback</span>
                    </a>
                </li>
            </ul>
        </nav>

        <main class="main-content">
            <!-- Home Page -->
            <section id="home" class="page active-page">
                <h1>Study Hub: Educational Edition</h1>
                <h2>Welcome to the Premium Educational Study Planner</h2>
                <p>Master your study routine with scientifically-backed learning techniques and advanced organization tools.</p>
               
                <div class="learning-concepts">
                    <h3><i class="fas fa-brain brain-icon"></i> Learning Science Principles</h3>
                    <p>This planner incorporates evidence-based learning strategies to maximize your study effectiveness:</p>
                   
                    <div class="concept-grid">
                        <div class="concept-card">
                            <h4>Spaced Repetition</h4>
                            <p>Review information at increasing intervals to combat the forgetting curve. Improves long-term retention by up to 200%.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Active Recall</h4>
                            <p>Testing yourself strengthens neural pathways more effectively than passive review. Boosts retention by 50-70%.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Interleaved Practice</h4>
                            <p>Mixing different subjects during study sessions improves concept differentiation and application.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Pomodoro Technique</h4>
                            <p>Working in focused 25-minute intervals prevents mental fatigue and maintains cognitive performance.</p>
                        </div>
                    </div>
                </div>
               
                <div class="features">
                    <div class="feature-card" onclick="document.querySelector('.nav-item a[href=\'#timer\']').parentElement.click()">
                        <i class="fas fa-clock"></i>
                        <h3>Study Timer</h3>
                        <p>Track your study sessions with our built-in Pomodoro timer to maximize productivity.</p>
                        <div class="edu-insight">
                            <h4>Why it works:</h4>
                            <p>Aligns with natural attention span cycles. Focused intervals followed by breaks maintain optimal cognitive performance.</p>
                        </div>
                    </div>
                   
                    <div class="feature-card" onclick="document.querySelector('.nav-item a[href=\'#tasks\']').parentElement.click()">
                        <i class="fas fa-tasks"></i>
                        <h3>Task Management</h3>
                        <p>Create, prioritize, and manage your study tasks efficiently with our task system.</p>
                        <div class="edu-insight">
                            <h4>Why it works:</h4>
                            <p>Breaking complex subjects into manageable tasks reduces cognitive load and prevents overwhelm.</p>
                        </div>
                    </div>
                   
                    <div class="feature-card" onclick="document.querySelector('.nav-item a[href=\'#calendar-page\']').parentElement.click()">
                        <i class="fas fa-calendar-alt"></i>
                        <h3>Study Calendar</h3>
                        <p>Plan your study sessions and track your progress with our interactive calendar.</p>
                        <div class="edu-insight">
                            <h4>Why it works:</h4>
                            <p>Scheduling activates the brain's commitment mechanisms, making follow-through more likely.</p>
                        </div>
                    </div>
                </div>
               
                <div class="resources-section">
                    <h2><i class="fas fa-book brain-icon"></i> Recommended Learning Resources</h2>
                    <div class="resource-list">
                        <div class="resource-card">
                            <h4><i class="fas fa-brain"></i> Cognitive Science</h4>
                            <ul>
                                <li><a href="https://www.learningscientists.org" target="_blank">The Learning Scientists</a> - Evidence-based study strategies</li>
                                <li><a href="https://www.coursera.org/learn/learning-how-to-learn" target="_blank">Learning How to Learn</a> - Popular Coursera course</li>
                                <li><a href="https://www.retrievalpractice.org" target="_blank">Retrieval Practice</a> - Science of effective recall</li>
                            </ul>
                        </div>
                       
                        <div class="resource-card">
                            <h4><i class="fas fa-graduation-cap"></i> Study Techniques</h4>
                            <ul>
                                <li><a href="https://fs.blog/spaced-repetition/" target="_blank">Spaced Repetition Guide</a> - Master long-term retention</li>
                                <li><a href="https://www.apa.org/ed/precollege/psychology-teacher-network/introductory-psychology/active-learning" target="_blank">Active Learning Strategies</a> - APA resource</li>
                                <li><a href="https://www.pomodorotechnique.com" target="_blank">Pomodoro Technique</a> - Official website</li>
                            </ul>
                        </div>
                       
                        <div class="resource-card">
                            <h4><i class="fas fa-book-open"></i> Books</h4>
                            <ul>
                                <li><a href="https://www.makeitstick.com" target="_blank">Make It Stick</a> - Science of successful learning</li>
                                <li><a href="https://barbaraoakley.com/books/a-mind-for-numbers/" target="_blank">A Mind for Numbers</a> - Math and science learning</li>
                                <li><a href="https://www.calnewport.com/books/deep-work/" target="_blank">Deep Work</a> - Focus in a distracted world</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Timer Page -->
            <section id="timer" class="page">
                <h1>Study Timer <span class="edu-tooltip">
                    <span class="edu-tooltiptext">
                        
                    </span>
                </span></h1>
                <div class="timer-container">
                    <div class="current-task">Current Task: <strong id="current-task-display">Select a task to start</strong></div>
                    <div class="timer-display-container">
                        <div class="timer-progress" id="timer-progress"></div>
                        <div class="timer-display">25:00</div>
                    </div>
                    <div class="timer-controls">
                        <button id="start-timer">Start</button>
                        <button id="pause-timer">Pause</button>
                        <button id="reset-timer">Reset</button>
                    </div>
                    <div class="pause-controls">
                        <button id="take-notes-btn">Take Notes</button>
                        <button id="switch-task-btn">Switch Task</button>
                    </div>
                   
                    <div class="timer-settings">
                        <label for="study-time">Study Time (minutes):</label>
                        <input type="number" id="study-time" value="25" min="1">
                        <label for="break-time">Break Time (minutes):</label>
                        <input type="number" id="break-time" value="5" min="1">
                    </div>
                    <div class="time-presets">
    <div class="time-preset" data-minutes="15">15 min</div>
    <div class="time-preset" data-minutes="25">25 min</div>
    <div class="time-preset" data-minutes="45">45 min</div>
    <div class="time-preset" data-minutes="60">60 min</div>
</div>
                   
                    <div class="time-lock-container">
                        <div class="time-lock-title">Focus Mode <span class="edu-tooltip">
                            <span class="edu-tooltiptext">
                                Focus Mode uses commitment devices to strengthen willpower and reduce decision fatigue about continuing study sessions.
                            </span>
                        </span></div>
                        <div class="time-lock-controls">
                            <button id="enable-time-lock">Enable Time Lock</button>
                            <button id="disable-time-lock">Disable Time Lock</button>
                        </div>
                        <div class="time-lock-status" id="time-lock-status">Focus mode is currently disabled</div>
                    </div>
                </div>
            </section>

            <!-- Calendar Page -->
            <section id="calendar-page" class="page">
                <h1>Study Calendar</h1>
                <div id="calendar"></div>
            </section>

            <!-- Progress Page -->
            <section id="progress" class="page">
                <h1>Your Progress</h1>
                <div class="progress-container">
                    <div class="progress-chart-container">
                        <h3>Current Session Progress</h3>
                        <div class="clock-visualization">
                            <div class="clock-circle">
                                <div class="clock-progress" id="clock-progress"></div>
                                <div class="clock-progress-fill" id="clock-progress-fill"></div>
                                <div class="clock-inner" id="clock-text">25:00</div>
                            </div>
                        </div>
                    </div>
                    <div class="progress-stats">
                        <div class="stat-card">
                            <h3>Total Study Time</h3>
                            <p class="stat-value" id="total-study-time">0 hours</p>
                        </div>
                        <div class="stat-card">
                            <h3>Sessions Completed</h3>
                            <p class="stat-value" id="sessions-completed">0</p>
                        </div>
                        <div class="stat-card">
                            <h3>Tasks Completed</h3>
                            <p class="stat-value" id="tasks-completed">0</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tasks Page -->
            <section id="tasks" class="page">
                <h1>Your Tasks</h1>
                <div class="task-container">
                    <div class="task-form">
                        <input type="text" id="new-task" placeholder="Add a new task...">
                        <button id="add-task">Add Task</button>
                        <select id="task-priority">
                            <option value="low">Low Priority</option>
                            <option value="medium" selected>Medium Priority</option>
                            <option value="high">High Priority</option>
                        </select>
                    </div>
                    <div class="task-list">
                        <h3>Pending Tasks</h3>
                        <ul id="pending-tasks"></ul>
                        <h3>Completed Tasks</h3>
                        <ul id="completed-tasks"></ul>
                    </div>
                </div>
            </section>

            <!-- History Page -->
            <section id="history" class="page">
                <h1>Study History</h1>
                <div class="history-container">
                    <div class="history-list" id="history-list"></div>
                </div>
            </section>

            <!-- Friends Page -->
            <section id="friends" class="page">
                <h1>Friends</h1>
                <div class="friends-container">
                    <button class="manage-friends" id="manage-friends">
                        <i class="fas fa-user-plus"></i> Manage Friends
                    </button>
                    <div class="friend-list" id="friend-list"></div>
                </div>
            </section>

            <!-- Notes Page -->
            <section id="notes" class="page">
                <h1>Your Notes</h1>
                <div>
                    Sample notes will be displayed here. You can add, edit, and delete notes to keep track of your study materials.
                 <form action="#" method="post" enctype="multipart/form-data">
        <input type="file" name="myfile" id="fileInput">
        <br><br>
        <input type="submit" value="Upload">
    </form>
                </div>
                <div class="notes-container">
                    <div class="notes-form">
                        <input type="text" id="note-title" placeholder="Note title...">
                        <textarea id="note-content" placeholder="Write your note here..."></textarea>
                        <button id="save-note">Save Note</button>
                    </div>
                    <div class="notes-list" id="notes-list"></div>
                </div>
            </section>

            <!-- Feedback Page -->
            <section id="feedback" class="page">
                <h1>Feedback</h1>
                <div class="feedback-container">
                    <form id="feedback-form">
                        <div class="form-group">
                            <label for="feedback-name">Your Name:</label>
                            <input type="text" id="feedback-name" required>
                        </div>
                        <div class="form-group">
                            <label for="feedback-email">Your Email:</label>
                            <input type="email" id="feedback-email" required>
                        </div>
                        <div class="form-group">
                            <label for="feedback-message">Your Feedback:</label>
                            <textarea id="feedback-message" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="feedback-rating">Rating:</label>
                            <div class="rating">
                                <span class="star" data-value="1"></span>
                                <span class="star" data-value="2"></span>
                                <span class="star" data-value="3"></span>
                                <span class="star" data-value="4"></span>
                                <span class="star" data-value="5"></span>
                            </div>
                            <input type="hidden" id="feedback-rating" value="0">
                        </div>
                        <button type="submit">Submit Feedback</button>
                    </form>
                    <div class="thank-you-message">
                        <h2>Thank you for your feedback!</h2>
                        <p>We appreciate you taking the time to help us improve.</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Friend Management Modal -->
    <div class="modal-overlay" id="friend-modal-overlay">
        <div class="friend-modal">
            <h3>Manage Friends</h3>
            <div class="friend-search">
                <input type="text" id="friend-search-input" placeholder="Search for friends...">
                <button id="search-friend-btn">Search</button>
            </div>
            <div class="friend-results" id="friend-results">
                <p>Search for friends to add</p>
            </div>
            <div class="current-friends">
                <h4>Your Friends</h4>
                <div id="current-friends-list"></div>
            </div>
            <div class="modal-actions">
                <button class="cancel-btn" id="cancel-friend-modal">Cancel</button>
                <button class="save-btn" id="save-friend-modal">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- Calendar Event Modal -->
    <div class="modal-overlay" id="event-modal-overlay">
        <div class="event-modal">
            <h3 id="event-modal-title">Add New Event</h3>
            <form id="event-form" class="event-form">
                <div class="event-form-group">
                    <label for="event-title">Event Title</label>
                    <input type="text" id="event-title" required>
                </div>
                <div class="event-form-group">
                    <label for="event-start">Start Date & Time</label>
                    <input type="datetime-local" id="event-start" required>
                </div>
                <div class="event-form-group">
                    <label for="event-end">End Date & Time</label>
                    <input type="datetime-local" id="event-end" required>
                </div>
                <div class="event-form-group">
                    <label for="event-description">Description</label>
                    <textarea id="event-description"></textarea>
                </div>
                <div class="event-form-group">
                    <label>Event Color</label>
                    <div class="event-color-picker">
                        <div class="event-color-option selected" style="background-color: #4361ee;" data-color="#4361ee"></div>
                        <div class="event-color-option" style="background-color: #1dd1a1;" data-color="#1dd1a1"></div>
                        <div class="event-color-option" style="background-color: #9b59b6;" data-color="#9b59b6"></div>
                        <div class="event-color-option" style="background-color: #ff9a3d;" data-color="#ff9a3d"></div>
                        <div class="event-color-option" style="background-color: #ff6b6b;" data-color="#ff6b6b"></div>
                    </div>
                    <input type="hidden" id="event-color" value="#4361ee">
                </div>
                <div class="modal-actions">
                    <button type="button" class="cancel-btn" id="cancel-event-modal">Cancel</button>
                    <button type="submit" class="save-btn">Save Event</button>
                    <button type="button" class="delete-btn" id="delete-event-btn" style="display: none;">Delete Event</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Variables
        let currentUser = null;
        let users = JSON.parse(localStorage.getItem('studyPlannerUsers')) || {};
        let friends = JSON.parse(localStorage.getItem('studyPlannerFriends')) || {};
        let studyHistory = JSON.parse(localStorage.getItem('studyPlannerHistory')) || {};
        let streaks = JSON.parse(localStorage.getItem('studyPlannerStreaks')) || {};
        let calendarEvents = JSON.parse(localStorage.getItem('studyPlannerCalendarEvents')) || {};
        let calendar = null;
        let currentEvent = null;

        // DOM Elements
        const loginContainer = document.querySelector('.login-container');
        const loginBtn = document.getElementById('login-btn');
        const usernameInput = document.getElementById('username');
        const existingUsersSelect = document.getElementById('existing-users');
        const userProfile = document.getElementById('user-profile');
        const streakDisplay = document.getElementById('streak-display');
        const streakCount = document.getElementById('streak-count');
        const currentTaskDisplay = document.getElementById('current-task-display');
        const timerDisplay = document.querySelector('.timer-display');
        const timerProgress = document.getElementById('timer-progress');
        const startBtn = document.getElementById('start-timer');
        const pauseBtn = document.getElementById('pause-timer');
        const resetBtn = document.getElementById('reset-timer');
        const studyTimeInput = document.getElementById('study-time');
        const breakTimeInput = document.getElementById('break-time');
        const clockText = document.getElementById('clock-text');
        const pauseControls = document.querySelector('.pause-controls');
        const takeNotesBtn = document.getElementById('take-notes-btn');
        const switchTaskBtn = document.getElementById('switch-task-btn');
        const enableTimeLockBtn = document.getElementById('enable-time-lock');
        const disableTimeLockBtn = document.getElementById('disable-time-lock');
        const timeLockStatus = document.getElementById('time-lock-status');
        const calendarEl = document.getElementById('calendar');
        const addTaskBtn = document.getElementById('add-task');
        const newTaskInput = document.getElementById('new-task');
        const pendingTasks = document.getElementById('pending-tasks');
        const completedTasks = document.getElementById('completed-tasks');
        const saveNoteBtn = document.getElementById('save-note');
        const noteTitleInput = document.getElementById('note-title');
        const noteContentInput = document.getElementById('note-content');
        const notesList = document.getElementById('notes-list');
        const historyList = document.getElementById('history-list');
        const friendList = document.getElementById('friend-list');
        const feedbackForm = document.getElementById('feedback-form');
        const stars = document.querySelectorAll('.star');
        const ratingInput = document.getElementById('feedback-rating');
        const thankYouMessage = document.querySelector('.thank-you-message');
        const chatbotIcon = document.getElementById('chatbot-icon');
        const chatbotModal = document.getElementById('chatbot-modal');
        const closeChatbot = document.getElementById('close-chatbot');
        const chatbotInput = document.getElementById('chatbot-input');
        const sendChatbot = document.getElementById('send-chatbot');
        const chatbotBody = document.getElementById('chatbot-body');
        const themeOptions = document.querySelectorAll('.theme-option');
        const friendModalOverlay = document.getElementById('friend-modal-overlay');
        const friendSearchInput = document.getElementById('friend-search-input');
        const searchFriendBtn = document.getElementById('search-friend-btn');
        const friendResults = document.getElementById('friend-results');
        const currentFriendsList = document.getElementById('current-friends-list');
        const cancelFriendModal = document.getElementById('cancel-friend-modal');
        const saveFriendModal = document.getElementById('save-friend-modal');
        const manageFriendsBtn = document.getElementById('manage-friends');
        const eventModalOverlay = document.getElementById('event-modal-overlay');
        const eventForm = document.getElementById('event-form');
        const eventTitleInput = document.getElementById('event-title');
        const eventStartInput = document.getElementById('event-start');
        const eventEndInput = document.getElementById('event-end');
        const eventDescriptionInput = document.getElementById('event-description');
        const eventColorInput = document.getElementById('event-color');
        const cancelEventModal = document.getElementById('cancel-event-modal');
        const deleteEventBtn = document.getElementById('delete-event-btn');
        const eventModalTitle = document.getElementById('event-modal-title');
        const colorOptions = document.querySelectorAll('.event-color-option');

        // Timer state
        let timer = null;
        let isRunning = false;
        let timeLeft = 25 * 60; // 25 minutes in seconds
        let currentTaskId = null;
        let isTimeLockActive = false;

        // Initialize existing users dropdown
        function initExistingUsers() {
            existingUsersSelect.innerHTML = '<option value="">Select a user</option>';
            Object.keys(users).forEach((username) => {
                const option = document.createElement('option');
                option.value = username;
                option.textContent = username;
                existingUsersSelect.appendChild(option);
            });
        }

        // Theme switching functionality
        function setTheme(themeName) {
            document.body.className = themeName;
            localStorage.setItem('studyPlannerTheme', themeName);
        }

        themeOptions.forEach(option => {
            option.addEventListener('click', () => {
                const theme = option.dataset.theme;
                setTheme(theme);
            });
        });

        // Load saved theme
        const savedTheme = localStorage.getItem('studyPlannerTheme') || 'light-theme';
        setTheme(savedTheme);

        // Login functionality
        loginBtn.addEventListener('click', () => {
            const username = usernameInput.value.trim();
            if (username) {
                loginUser(username);
            }
        });

        existingUsersSelect.addEventListener('change', (e) => {
            if (e.target.value) {
                loginUser(e.target.value);
            }
        });

        function loginUser(username) {
            if (!users[username]) {
                users[username] = {
                    username,
                    tasks: [],
                    notes: [],
                    studyStats: {
                        totalStudyTime: 0,
                        sessionsCompleted: 0,
                        tasksCompleted: 0,
                    },
                    password: "password123" // Default password
                };
                localStorage.setItem('studyPlannerUsers', JSON.stringify(users));

                if (!friends[username]) {
                    friends[username] = [];
                    localStorage.setItem('studyPlannerFriends', JSON.stringify(friends));
                }

                if (!studyHistory[username]) {
                    studyHistory[username] = [];
                    localStorage.setItem('studyPlannerHistory', JSON.stringify(studyHistory));
                }

                if (!calendarEvents[username]) {
                    calendarEvents[username] = [];
                    localStorage.setItem('studyPlannerCalendarEvents', JSON.stringify(calendarEvents));
                }
            }

            currentUser = username;
            userProfile.textContent = username.charAt(0).toUpperCase();
            loginContainer.style.display = 'none';
            initExistingUsers();

            // Update streak
            updateStreak();
            streakDisplay.style.display = 'flex';

            loadUserData();
            initializeTimerForUser();
            initializeCalendar();
        }
        // Time presets functionality
const timePresets = document.querySelectorAll('.time-preset');

timePresets.forEach(preset => {
    preset.addEventListener('click', function() {
        const minutes = parseInt(this.dataset.minutes);
        studyTimeInput.value = minutes;
        
        // Update active state
        timePresets.forEach(p => p.classList.remove('active'));
        this.classList.add('active');
        
        // Reset timer with new time if not running
        if (!isRunning) {
            resetTimer();
        }
    });
});

// Set 25 minutes as default active
document.querySelector('.time-preset[data-minutes="25"]').classList.add('active');

        // Streak functionality
        function updateStreak() {
            if (!currentUser) return;
           
            const today = new Date().toDateString();
            const lastLogin = streaks[currentUser] ? new Date(streaks[currentUser].lastLogin) : null;
           
            if (!streaks[currentUser]) {
                streaks[currentUser] = {
                    streak: 1,
                    lastLogin: today
                };
            } else {
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
               
                if (lastLogin.toDateString() === today) {
                    // Already logged in today, do nothing
                } else if (lastLogin.toDateString() === yesterday.toDateString()) {
                    // Consecutive day
                    streaks[currentUser].streak += 1;
                    streaks[currentUser].lastLogin = today;
                } else {
                    // Broken streak
                    streaks[currentUser].streak = 1;
                    streaks[currentUser].lastLogin = today;
                }
            }
           
            localStorage.setItem('studyPlannerStreaks', JSON.stringify(streaks));
            streakCount.textContent = streaks[currentUser].streak;
        }

        // Navigation functionality
        const navItems = document.querySelectorAll('.nav-item');
        const pages = document.querySelectorAll('.page');

        navItems.forEach((item) => {
            item.addEventListener('click', function () {
                navItems.forEach((navItem) => navItem.classList.remove('active'));
                this.classList.add('active');
                pages.forEach((page) => page.classList.remove('active-page'));
                const targetPage = this.querySelector('a').getAttribute('href');
                document.querySelector(targetPage).classList.add('active-page');
            });
        });

        // Toggle navbar
        document.getElementById('nav-toggle').addEventListener('click', () => {
            document.querySelector('.navbar').classList.toggle('expanded');
        });

        // Load user data
        function loadUserData() {
            if (!currentUser) return;
            const user = users[currentUser];

            // Load stats
            updateStats();

            // Load tasks
            loadTasks();

            // Load notes
            loadNotes();

            // Load history
            loadHistory();

            // Load friends
            loadFriends();
        }

        // --- Task management ---

        function loadTasks() {
            if (!currentUser) return;
            pendingTasks.innerHTML = '';
            completedTasks.innerHTML = '';

            const tasks = users[currentUser].tasks;
            if (!tasks) return;

            tasks.forEach((task) => {
                const taskItem = createTaskElement(task);
                if (task.completed) {
                    completedTasks.appendChild(taskItem);
                } else {
                    pendingTasks.appendChild(taskItem);
                }
            });
        }

        function createTaskElement(task) {
            const taskItem = document.createElement('li');
            taskItem.className = 'task-item';
            taskItem.dataset.id = task.id;

            const priorityClass = `priority-${task.priority}`;

            taskItem.innerHTML = `
                <div class="task-info">
                    <input type="checkbox" class="task-checkbox" ${task.completed ? 'checked' : ''}>
                    <span class="task-text ${task.completed ? 'completed' : ''}">${task.text}</span>
                    <span class="task-priority ${priorityClass}">${task.priority}</span>
                </div>
                <div class="task-actions">
                    <button class="start-task">Start Task</button>
                    <button class="edit-task">Edit</button>
                    <button class="delete-task">Delete</button>
                </div>
            `;

            const checkbox = taskItem.querySelector('.task-checkbox');
            const startBtn = taskItem.querySelector('.start-task');
            const editBtn = taskItem.querySelector('.edit-task');
            const deleteBtn = taskItem.querySelector('.delete-task');

            checkbox.addEventListener('change', function () {
                const taskId = taskItem.dataset.id;
                const task = users[currentUser].tasks.find((t) => t.id === taskId);
                if (task) {
                    task.completed = this.checked;
                    if (this.checked) {
                        users[currentUser].studyStats.tasksCompleted++;
                    } else {
                        users[currentUser].studyStats.tasksCompleted--;
                    }
                    localStorage.setItem('studyPlannerUsers', JSON.stringify(users));
                    loadTasks();
                    updateStats();
                }
            });

            startBtn.addEventListener('click', function () {
                const taskId = taskItem.dataset.id;
                const task = users[currentUser].tasks.find((t) => t.id === taskId);
                if (task) {
                    currentTaskId = task.id;
                    currentTaskDisplay.textContent = `Currently working on: ${task.text}`;
                    document
                        .querySelector('.nav-item a[href="#timer"]')
                        .parentElement.click();
                }
            });

            editBtn.addEventListener('click', () => {
                const taskId = taskItem.dataset.id;
                const task = users[currentUser].tasks.find((t) => t.id === taskId);
                if (!task) return;

                const newText = prompt('Edit your task:', task.text);
                if (newText === null || newText.trim() === '') return;

                task.text = newText.trim();
                localStorage.setItem('studyPlannerUsers', JSON.stringify(users));
                loadTasks();
            });

            deleteBtn.addEventListener('click', () => {
                if (confirm('Are you sure you want to delete this task?')) {
                    const taskId = taskItem.dataset.id;
                    users[currentUser].tasks = users[currentUser].tasks.filter(
                        (t) => t.id !== taskId
                    );
                    localStorage.setItem('studyPlannerUsers', JSON.stringify(users));
                    loadTasks();
                }
            });

            return taskItem;
        }

        // Add new task
        function addTask() {
            const taskText = newTaskInput.value.trim();
            const priority = document.getElementById('task-priority').value;
            if (!taskText) return;

            const newTask = {
                id: Date.now().toString(),
                text: taskText,
                priority,
                completed: false,
                createdAt: new Date().toISOString()
            };

            users[currentUser].tasks.push(newTask);
            localStorage.setItem('studyPlannerUsers', JSON.stringify(users));
            loadTasks();
            newTaskInput.value = '';
        }

        addTaskBtn.addEventListener('click', addTask);
        newTaskInput.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                addTask();
            }
        });

        // --- Timer related functions ---

        function getGlobalStudyTime() {
            return parseInt(studyTimeInput.value) || 25;
        }
        function getGlobalBreakTime() {
            return parseInt(breakTimeInput.value) || 5;
        }

        // Format seconds as mm:ss
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60)
                .toString()
                .padStart(2, '0');
            const secs = (seconds % 60).toString().padStart(2, '0');
            return `${mins}:${secs}`;
        }

        // Update timer display
        function updateDisplay() {
            const displayTime = formatTime(timeLeft);
            timerDisplay.textContent = displayTime;
            clockText.textContent = displayTime;
           
            // Update circular progress
            const studyTime = getGlobalStudyTime() * 60;
            const progressPercentage = ((studyTime - timeLeft) / studyTime) * 360;
            timerProgress.style.background = `conic-gradient(var(--primary-color) ${progressPercentage}deg, var(--bg-color) 0deg)`;
        }

        // Update clock visualization rotation
        function updateClockVisualization(progress) {
            if (progress <= 180) {
                document.getElementById('clock-progress').style.transform = `rotate(${progress}deg)`;
                document.getElementById('clock-progress-fill').style.transform = 'rotate(0deg)';
            } else {
                document.getElementById('clock-progress').style.transform = `rotate(180deg)`;
                document.getElementById('clock-progress-fill').style.transform = `rotate(${progress - 180}deg)`;
            }
        }

        // Start timer
        function startTimer() {
            if (isRunning) return;
            isRunning = true;
            timer = setInterval(() => {
                timeLeft--;
                updateDisplay();
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    isRunning = false;
                    alert('Study session complete! Time for a break.');
                }
            }, 1000);
        }

        // Pause timer
        function pauseTimer() {
            clearInterval(timer);
            isRunning = false;
        }

        // Reset timer
        function resetTimer() {
            pauseTimer();
            timeLeft = getGlobalStudyTime() * 60;
            updateDisplay();
        }

        // Update global study & break time inputs
        studyTimeInput.addEventListener('change', () => {
            if (!isRunning) {
                resetTimer();
            }
        });

        // Bind buttons
        startBtn.addEventListener('click', startTimer);
        pauseBtn.addEventListener('click', pauseTimer);
        resetBtn.addEventListener('click', resetTimer);

        // Take Notes button navigates to notes page
        takeNotesBtn.addEventListener('click', () => {
            document.querySelector('.nav-item a[href="#notes"]').parentElement.click();
            pauseControls.style.display = 'none';
        });

        // Switch Task button
        switchTaskBtn.addEventListener('click', () => {
            alert('Select a new task from the Tasks page');
            pauseControls.style.display = 'none';
        });

        // --- Time Lock functionality ---
        enableTimeLockBtn.addEventListener('click', () => {
            if (!isRunning) {
                alert('Please start a timer first to enable focus mode.');
                return;
            }

            isTimeLockActive = true;
            enableTimeLockBtn.style.display = 'none';
            disableTimeLockBtn.style.display = 'block';
            timeLockStatus.textContent = 'Focus mode is active - you cannot leave the timer until session ends';
            timeLockStatus.style.color = 'var(--danger-color)';
        });

        disableTimeLockBtn.addEventListener('click', () => {
            const password = prompt('Enter your password to disable focus mode:');
            if (password === users[currentUser].password) {
                isTimeLockActive = false;
                enableTimeLockBtn.style.display = 'block';
                disableTimeLockBtn.style.display = 'none';
                timeLockStatus.textContent = 'Focus mode is currently disabled';
                timeLockStatus.style.color = 'var(--text-light)';
            } else {
                alert('Incorrect password. Focus mode remains active.');
            }
        });

        // --- Calendar functionality ---
        function initializeCalendar() {
            if (!currentUser) return;
           
            calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth,timeGridWeek,timeGridDay'
                },
                events: calendarEvents[currentUser] || [],
                eventClick: function(info) {
                    openEventModal(info.event);
                },
                dateClick: function(info) {
                    createNewEvent(info.date);
                },
                eventContent: function(arg) {
                    return {
                        html: `<div class="fc-event-title">${arg.event.title}</div>`
                    };
                },
                height: 'auto'
            });
           
            calendar.render();
        }

        function createNewEvent(date) {
            currentEvent = null;
            eventModalTitle.textContent = 'Add New Event';
            deleteEventBtn.style.display = 'none';
           
            // Set default times (current hour to next hour)
            const start = new Date(date);
            const end = new Date(date);
            end.setHours(end.getHours() + 1);
           
            // Format for datetime-local input
            const formatForInput = (date) => {
                return date.toISOString().slice(0, 16);
            };
           
            eventTitleInput.value = '';
            eventStartInput.value = formatForInput(start);
            eventEndInput.value = formatForInput(end);
            eventDescriptionInput.value = '';
            eventColorInput.value = '#4361ee';
           
            // Reset color selection
            colorOptions.forEach(option => {
                option.classList.remove('selected');
                if (option.dataset.color === '#4361ee') {
                    option.classList.add('selected');
                }
            });
           
            eventModalOverlay.style.display = 'flex';
        }

        function openEventModal(event) {
            currentEvent = event;
            eventModalTitle.textContent = 'Edit Event';
            deleteEventBtn.style.display = 'block';
           
            eventTitleInput.value = event.title;
            eventStartInput.value = formatDateForInput(event.start);
            eventEndInput.value = event.end ? formatDateForInput(event.end) : '';
            eventDescriptionInput.value = event.extendedProps.description || '';
            eventColorInput.value = event.backgroundColor || '#4361ee';
           
            // Set color selection
            colorOptions.forEach(option => {
                option.classList.remove('selected');
                if (option.dataset.color === (event.backgroundColor || '#4361ee')) {
                    option.classList.add('selected');
                }
            });
           
            eventModalOverlay.style.display = 'flex';
        }

        function formatDateForInput(date) {
            if (!date) return '';
            const d = new Date(date);
            return d.toISOString().slice(0, 16);
        }

        eventForm.addEventListener('submit', function(e) {
            e.preventDefault();
           
            const eventData = {
                title: eventTitleInput.value,
                start: eventStartInput.value,
                end: eventEndInput.value,
                description: eventDescriptionInput.value,
                backgroundColor: eventColorInput.value
            };
           
            if (currentEvent) {
                // Update existing event
                currentEvent.setProp('title', eventData.title);
                currentEvent.setStart(eventData.start);
                currentEvent.setEnd(eventData.end);
                currentEvent.setExtendedProp('description', eventData.description);
                currentEvent.setProp('backgroundColor', eventData.backgroundColor);
            } else {
                // Add new event
                const newEvent = {
                    title: eventData.title,
                    start: eventData.start,
                    end: eventData.end,
                    description: eventData.description,
                    backgroundColor: eventData.backgroundColor
                };
               
                calendar.addEvent(newEvent);
            }
           
            // Save to local storage
            saveCalendarEvents();
            eventModalOverlay.style.display = 'none';
        });

        deleteEventBtn.addEventListener('click', function() {
            if (confirm('Are you sure you want to delete this event?')) {
                currentEvent.remove();
                saveCalendarEvents();
                eventModalOverlay.style.display = 'none';
            }
        });

        cancelEventModal.addEventListener('click', function() {
            eventModalOverlay.style.display = 'none';
        });

        colorOptions.forEach(option => {
            option.addEventListener('click', function() {
                colorOptions.forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                eventColorInput.value = this.dataset.color;
            });
        });

        function saveCalendarEvents() {
            if (!currentUser) return;
           
            const events = calendar.getEvents().map(event => {
                return {
                    title: event.title,
                    start: event.start,
                    end: event.end,
                    description: event.extendedProps.description,
                    backgroundColor: event.backgroundColor
                };
            });
           
            calendarEvents[currentUser] = events;
            localStorage.setItem('studyPlannerCalendarEvents', JSON.stringify(calendarEvents));
        }

        // --- Notes functionality ---

        function loadNotes() {
            if (!currentUser) return;
            const notes = users[currentUser].notes || [];
            notesList.innerHTML = '';

            notes.forEach((note) => {
                const noteCard = document.createElement('div');
                noteCard.className = 'note-card';
                noteCard.dataset.id = note.id;

                noteCard.innerHTML = `
                    <h3>${note.title}</h3>
                    <p>${note.content}</p>
                    <div class="note-actions">
                        <button class="edit-note">Edit</button>
                        <button class="delete-note">Delete</button>
                    </div>
                `;

                const editBtn = noteCard.querySelector('.edit-note');
                const deleteBtn = noteCard.querySelector('.delete-note');

                editBtn.addEventListener('click', () => {
                    const noteId = noteCard.dataset.id;
                    const note = users[currentUser].notes.find((n) => n.id === noteId);
                    if (!note) return;
                    const newTitle = prompt('Edit note title:', note.title);
                    const newContent = prompt('Edit note content:', note.content);
                    if (newTitle !== null && newContent !== null) {
                        note.title = newTitle;
                        note.content = newContent;
                        localStorage.setItem('studyPlannerUsers', JSON.stringify(users));
                        loadNotes();
                    }
                });

                deleteBtn.addEventListener('click', () => {
                    if (confirm('Are you sure you want to delete this note?')) {
                        const noteId = noteCard.dataset.id;
                        users[currentUser].notes = users[currentUser].notes.filter((n) => n.id !== noteId);
                        localStorage.setItem('studyPlannerUsers', JSON.stringify(users));
                        loadNotes();
                    }
                });

                notesList.appendChild(noteCard);
            });
        }

        saveNoteBtn.addEventListener('click', () => {
            const title = noteTitleInput.value.trim();
            const content = noteContentInput.value.trim();
            if (!title || !content) return alert('Please enter title and content for the note.');

            const newNote = {
                id: Date.now().toString(),
                title,
                content,
                createdAt: new Date().toISOString(),
            };

            if (!users[currentUser].notes) users[currentUser].notes = [];
            users[currentUser].notes.push(newNote);
            localStorage.setItem('studyPlannerUsers', JSON.stringify(users));
            loadNotes();

            noteTitleInput.value = '';
            noteContentInput.value = '';
        });

        // --- History functionality ---

        function loadHistory() {
            if (!currentUser) return;
            historyList.innerHTML = '';

            if (!studyHistory[currentUser] || studyHistory[currentUser].length === 0) {
                historyList.innerHTML = '<p>No study history recorded yet.</p>';
                return;
            }

            const sortedHistory = [...studyHistory[currentUser]].sort(
                (a, b) => new Date(b.endTime) - new Date(a.endTime)
            );

            sortedHistory.forEach((entry) => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';

                const start = new Date(entry.startTime);
                const end = new Date(entry.endTime);
                const duration = Math.floor((end - start) / 60000);

                historyItem.innerHTML = `
                    <div class="history-info">
                        <div class="history-task">${entry.task || 'No specific task'}</div>
                        <div class="history-duration">Duration: ${duration} minutes</div>
                    </div>
                    <div class="history-date">${start.toLocaleDateString()}</div>
                `;

                historyList.appendChild(historyItem);
            });
        }

        // --- Friends functionality ---

        function loadFriends() {
            friendList.innerHTML = '';

            if (!friends[currentUser] || friends[currentUser].length === 0) {
                friendList.innerHTML = '<p>No friends added yet. Click "Manage Friends" to add some.</p>';
                return;
            }

            friends[currentUser].forEach((friend) => {
                if (!users[friend]) return;

                const friendCard = document.createElement('div');
                friendCard.className = 'friend-card';

                const activeTasks = users[friend].tasks
                    .filter((t) => !t.completed)
                    .slice(0, 3)
                    .map(
                        (task) => `
                        <div class="friend-task-item">
                            ${task.text}
                            <span class="friend-task-priority priority-${task.priority}">${task.priority}</span>
                        </div>`
                    )
                    .join('');

                friendCard.innerHTML = `
                    <div class="friend-avatar">${friend.charAt(0).toUpperCase()}</div>
                    <h3>${friend}</h3>
                    <div class="friend-tasks">
                        <h4>Current Tasks:</h4>
                        ${activeTasks || '<p>No active tasks</p>'}
                    </div>
                `;

                friendList.appendChild(friendCard);
            });
        }

        manageFriendsBtn.addEventListener('click', () => {
            openFriendModal();
        });

        function openFriendModal() {
            // Load current friends
            updateCurrentFriendsList();
           
            // Clear search results
            friendResults.innerHTML = '<p>Search for friends to add</p>';
           
            friendModalOverlay.style.display = 'flex';
        }

        function updateCurrentFriendsList() {
            currentFriendsList.innerHTML = '';
           
            if (!friends[currentUser] || friends[currentUser].length === 0) {
                currentFriendsList.innerHTML = '<p>No friends added yet</p>';
                return;
            }
           
            friends[currentUser].forEach(friend => {
                if (!users[friend]) return;
               
                const friendItem = document.createElement('div');
                friendItem.className = 'friend-list-item';
                friendItem.innerHTML = `
                    <span>${friend}</span>
                    <button class="remove-friend-btn" data-username="${friend}">Remove</button>
                `;
               
                friendItem.querySelector('.remove-friend-btn').addEventListener('click', function() {
                    removeFriend(friend);
                });
               
                currentFriendsList.appendChild(friendItem);
            });
        }

        searchFriendBtn.addEventListener('click', searchFriends);
        friendSearchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') searchFriends();
        });

        function searchFriends() {
            const searchTerm = friendSearchInput.value.trim().toLowerCase();
            if (!searchTerm) return;
           
            const results = Object.keys(users)
                .filter(username =>
                    username.toLowerCase().includes(searchTerm) &&
                    username !== currentUser &&
                    !friends[currentUser].includes(username)
                );
           
            displayFriendResults(results);
        }

        function displayFriendResults(results) {
            friendResults.innerHTML = '';
           
            if (results.length === 0) {
                friendResults.innerHTML = '<p>No friends found</p>';
                return;
            }
           
            results.forEach(username => {
                const resultItem = document.createElement('div');
                resultItem.className = 'friend-result-item';
                resultItem.innerHTML = `
                    <span class="friend-result-name">${username}</span>
                    <button class="add-friend-btn" data-username="${username}">Add</button>
                `;
               
                resultItem.querySelector('.add-friend-btn').addEventListener('click', function() {
                    addFriend(username);
                });
               
                friendResults.appendChild(resultItem);
            });
        }

        function addFriend(username) {
            if (!friends[currentUser].includes(username)) {
                friends[currentUser].push(username);
                localStorage.setItem('studyPlannerFriends', JSON.stringify(friends));
                updateCurrentFriendsList();
                displayFriendResults(
                    Object.keys(users).filter(u =>
                        u.toLowerCase().includes(friendSearchInput.value.trim().toLowerCase()) &&
                        u !== currentUser &&
                        !friends[currentUser].includes(u)
                    )
                );
            }
        }

        function removeFriend(username) {
            friends[currentUser] = friends[currentUser].filter(f => f !== username);
            localStorage.setItem('studyPlannerFriends', JSON.stringify(friends));
            updateCurrentFriendsList();
            loadFriends();
        }

        cancelFriendModal.addEventListener('click', function() {
            friendModalOverlay.style.display = 'none';
        });

        saveFriendModal.addEventListener('click', function() {
            friendModalOverlay.style.display = 'none';
            loadFriends();
        });

        // --- Update stats display ---
        function updateStats() {
            if (!currentUser) return;
            const user = users[currentUser];
            const totalMinutes = Math.floor(user.studyStats.totalStudyTime / 60);
            const hours = Math.floor(totalMinutes / 60);
            const minutes = totalMinutes % 60;
            document.getElementById('total-study-time').textContent = `${hours} hours ${minutes} minutes`;
            document.getElementById('sessions-completed').textContent = user.studyStats.sessionsCompleted;
            document.getElementById('tasks-completed').textContent = user.studyStats.tasksCompleted;
        }

        // --- Initialize timer when user logs in or reloads ---
        function initializeTimerForUser() {
            if (!currentUser) return;
            if (!users[currentUser].tasks || users[currentUser].tasks.length === 0) {
                currentTaskId = null;
                currentTaskDisplay.textContent = 'Select a task to start';
                resetTimer();
                return;
            }

            if (!currentTaskId || !users[currentUser].tasks.find((t) => t.id === currentTaskId)) {
                let firstTask = users[currentUser].tasks.find((t) => !t.completed);
                if (!firstTask) firstTask = users[currentUser].tasks[0];

                currentTaskId = firstTask.id;
                currentTaskDisplay.textContent = `Currently working on: ${firstTask.text}`;
            }

            resetTimer();
        }

        // Initialize timer display
        updateDisplay();

        // --- Feedback functionality ---

        stars.forEach((star) => {
            star.addEventListener('click', function () {
                const value = parseInt(this.getAttribute('data-value'));
                ratingInput.value = value;

                stars.forEach((s) => {
                    s.classList.remove('active');
                    if (parseInt(s.getAttribute('data-value')) <= value) {
                        s.classList.add('active');
                    }
                });
            });
        });

        feedbackForm.addEventListener('submit', (e) => {
            e.preventDefault();

            const formData = {
                name: document.getElementById('feedback-name').value,
                email: document.getElementById('feedback-email').value,
                message: document.getElementById('feedback-message').value,
                rating: ratingInput.value,
            };

            console.log('Feedback submitted:', formData);

            feedbackForm.style.display = 'none';
            thankYouMessage.style.display = 'block';

            setTimeout(() => {
                feedbackForm.reset();
                stars.forEach((s) => s.classList.remove('active'));
                ratingInput.value = '0';
                feedbackForm.style.display = 'block';
                thankYouMessage.style.display = 'none';
            }, 5000);
        });

        // --- Chatbot functionality ---
        chatbotIcon.addEventListener('click', () => {
            chatbotModal.classList.toggle('active');
        });
       
        closeChatbot.addEventListener('click', () => {
            chatbotModal.classList.remove('active');
        });
       
        function sendMessage() {
            const message = chatbotInput.value.trim();
            if (message) {
                // Add user message
                addMessage(message, 'user');
               
                // Simulate bot response
                setTimeout(() => {
                    addMessage(getBotResponse(message), 'bot');
                }, 1000);
               
                // Clear input
                chatbotInput.value = '';
            }
        }
       
        sendChatbot.addEventListener('click', sendMessage);
        chatbotInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });
       
        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('chatbot-message', `${sender}-message`);
            messageDiv.innerHTML = `<p>${text}</p>`;
            chatbotBody.appendChild(messageDiv);
           
            // Scroll to bottom
            chatbotBody.scrollTop = chatbotBody.scrollHeight;
        }
       
        function getBotResponse(message) {
            const lowerMsg = message.toLowerCase();
           
            // Learning techniques
            if (lowerMsg.includes('learn') || lowerMsg.includes('study')) {
                return "Research shows that spaced repetition and active recall are the most effective learning techniques. Try studying in 25-minute intervals with 5-minute breaks!";
            }
           
            // Timer questions
            if (lowerMsg.includes('timer') || lowerMsg.includes('pomodoro')) {
                return "The Pomodoro Technique helps maintain focus. Set your study timer to 25 minutes, then take a 5-minute break. After 4 sessions, take a longer 15-30 minute break.";
            }
           
            // Task management
            if (lowerMsg.includes('task') || lowerMsg.includes('organize')) {
                return "Break large tasks into smaller subtasks and prioritize them. Studies show that completing small tasks releases dopamine, which motivates you to keep going!";
            }
           
            // Default response
            return "I'm here to help with your study journey! Ask about learning techniques, time management, or productivity strategies.";
        }

        // Initialize existing users dropdown on load
        initExistingUsers();
    </script>
</body>
</html>